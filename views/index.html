<!DOCTYPE html>
<html ng-app="nirc">
  <head>
    <title>nirc</title>
    <script src='/socket.io/socket.io.js'></script>
    <script src='/javascripts/vendor/mousetrap.min.js'></script>
    <script src='/javascripts/vendor/angular.min.js'></script>
    <script src='/javascripts/vendor/lodash.min.js'></script>
    <script src='/javascripts/nirc.js'></script>
    <script src='/javascripts/nirc/directives/on-enter.js'></script>
    <script src='/javascripts/nirc/directives/scroll-glue.js'></script>
    <script src='/javascripts/nirc/user.js'></script>
    <script src='/javascripts/nirc/channel.js'></script>
    <script src='/javascripts/nirc/chat_event.js'></script>
    <script src='/javascripts/nirc/client.js'></script>
    <script src='/javascripts/nirc/templates.js'></script>
    <link href='//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css' rel='stylesheet'>
    <link href='/stylesheets/style.css' media='screen' rel='stylesheet' type='text/css'/>
  </head>
  <body ng-controller="MainCtrl">
    <!-- config overlay -->
    <div class="overlay" ng-if="!client.connected">
      <div ng-include="'templates/config.html'"></div>
    </div>

    <!-- channel/status tabbar  -->
    <ul class="tabbar" ng-controller="TabCtrl">
      <li class="logo">
        nIRC
      </li>
      <li ng-class="{active: isActive(client.statusChannel)}">
        <a href ng-click="setActive(client.statusChannel)">
          <i class="fa fa-fw" ng-class="iconFor(client.statusChannel)"></i>
          status
        </a>
      </li>
      <li ng-repeat="channel in client.channels" ng-class="{active: isActive(channel)}">
        <a href ng-click="setActive(channel)">
          <i class="fa fa-fw" ng-class="iconFor(channel)"></i>
          {{channel.name}}
        </a>
      </li>
    </ul>

    <div class="wrapper">
      <!-- main content pane -->
      <ul class="content" scroll-glue>
        <li ng-repeat="event in client.activeChannel.history">
          <span class="timestamp">
            {{event.timestamp | date:'HH:mm:ss'}}
          </span>
          <span class="sender">
            {{event.from.nick}}:
          </span>
          <span class="message">
            {{event.message}}
          </span>
        </li>
      </ul>
      <!-- user list -->
      <ul class="users">
        <li ng-repeat="user in client.activeChannel.users">
          {{user.nick}}
        </li>
      </ul>
    </div>

    <div class="input-wrapper">
      <input type="text" class="user-input" on-enter="client.say(text)">
    </div>
  </body>
</html>
